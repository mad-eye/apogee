<template name="edit">
  {{> projectStatus}}
  {{#if isInterview}}
      {{> interviewIntro }}
  {{/if}}
    <div class="row">
        <div class="span3">
          {{#if isInterview}}
            {{> interview}}
          {{else}}
            {{> fileTree}}
          {{/if}}
          
        </div>
        <div id="editorChrome" class="span8">
          {{> editorChrome }}
          {{> editorOverlay }}
          <div id="editorContainer">
            {{> editor}}
            {{> editorFooter}}
          </div>
        </div>
    </div>
</template>

<template name="interviewIntro">
  <div class="row">
    {{#unless Session 'interviewInstructionsClosed'}}
      <div class="span12">
        <div id="interviewInstructions" class="well">
          <button id="closeInterviewInstructions" class="close">X</button>
          <ol>
            <li>Add interview files in the left sidebar</li>
            <li>Execute these files with the editor&apos;s run button</li>
            <li>Embed your interview session in a Google Hangout:&nbsp; {{> hangoutButton}}</li>
          </ol>
        </div>
      </div>
    {{/unless}}
  </div>
</template>

<template name="hangoutButton">
  <a id="hangoutLink" href="{{hangoutLink}}" style="text-decoration:none;">
    <img src="https://ssl.gstatic.com/s2/oz/images/stars/hangout/1/gplus-hangout-60x230-normal.png"
         alt="Start a new Hangout"
         title="Start a new Hangout"
         style="border:0;width:115px;height:30px;" />
  </a>
</template>

<template name="projectStatus">
  {{#each projectAlerts}}
    {{> alert this}}
  {{/each}}
</template>

<template name="fileTree">
<div id="projectName"><h4>{{projectName}}</h4></div>
<ul class="fileTree">
    {{#each files}}
      {{#if isVisible}}
        <li class="{{fileEntryClass}}" id="{{_id}}">
          <span>{{filename}} {{#if modified}}*{{/if}}</span>
          {{#each usersInFile this}}
            <img class="fileTreeUserIcon" alt="" destination="{{this.destination}}" src="{{this.img}}"</img>
          {{/each}}
        </li>
      {{/if}}
    {{/each}}
</ul>
</template>

<template name="editorChrome">
  <div id="editorTitleBar" class="clearfix">
    <div id="editorTitle" class="pull-left">
      <h4>
        {{editorFileName}}
      </h4>
    </div>
  </div>
  {{> editorBar }}
</template>

<template name="editorOverlay">
  {{#if editorIsLoading}}
    <div id="editorOverlay">
      <img id="editorLoadingSpinner" src="/images/file-loader.gif" alt="Loading..." />
    </div>
  {{/if}}
</template>

<template name="editor">
  <div id="editor"></div>
</template>

<template name="editorFooter">
  {{#if isInterview}}
    <div id="programOutput">
      <pre id="stdout"><span class="filler" style="color: #999">program output will go here</span></pre>
    </div>
  {{/if}}
</template>
